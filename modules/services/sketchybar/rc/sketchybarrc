#!/usr/bin/env nu
use std/log
use colors.nu

const font = "Hack Nerd Font"

def run () {
  (
    sketchybar
      --bar
        height=42
        position=bottom
        margin=-2
        topmost=window
        shadow=off
        sticky=on
        color=@bar_color@
        corner_radius=@bar_corner_radius@
        blur_radius=@bar_blur_radius@
        border_width=@bar_border_width@
        border_color=@bar_border_color@

      --default
        padding_left=5
        padding_right=5
        icon.font=$"($font):Bold:19"
        label.font=$"($font):Regular:16"
        label.padding_left=6
        label.padding_right=10
        icon.padding_left=10
        label.color=$"($colors.text)"
        # icon.padding_left=6
        # icon.padding_right=6
        icon.color=$"($colors.text)"
  )

  # use ./plugins/apple_logo.nu; apple_logo item
  use ./plugins/workspace.nu; workspace item
  use ./plugins/front_app.nu; front_app item
  # use ./plugins/media.nu; media item
  use ./plugins/datetime.nu; datetime item
  use ./plugins/battery.nu; battery item
  use ./plugins/cpu.nu; cpu item
  use ./plugins/volume.nu; volume item
  use ./plugins/ai.nu; ai item
  # use ./plugins/bluetooth.nu; bluetooth item

  @right_bracket_code@
}

def main () {
  log info "sketchybar: loading config.."

  run

  log info "sketchybar: finish loading config"
  sketchybar --update
}
